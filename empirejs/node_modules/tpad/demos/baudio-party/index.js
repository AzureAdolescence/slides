var tpad = require('../../lib/tpad')
var color = require('color')
var request = require('request')
var _ = require('underscore')
var debounceMilliseconds = 100

var playChannel(channel) {
  request({uri: 'http://10.11.24.59:5000/' + channel, method: "POST", body: "offset=0"}, function(e,r,b) {
    console.log(r.statusCode, b)
  })
}

tpad.init(function (err, tpad) {
  tpad.each(function(pad, index) {
    pad.on('pressure', _.throttle(function(p) {
      playChannel(index)
    }, debounceMilliseconds))
  })
})
